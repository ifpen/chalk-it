!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TaipyGuiBase=e():t.TaipyGuiBase=e()}(this,(()=>(()=>{"use strict";var t,e={464:(t,e,i)=>{i.r(e),i.d(e,{TaipyApp:()=>h,createApp:()=>u,default:()=>p});var n=i(829);const a="TaipyClientId",o=(t,e,i,a,o,r="",s=!0,c)=>{const d=(0,n.A)(),l={type:e,name:i,payload:a,propagate:s,client_id:o,ack_id:d,module_context:r};return null==t||t.emit("message",l,c),d},r=new Worker(new URL(i.p+i.u(677),i.b));var s=i(80);class c{constructor(t){this._data={},this._init_data={},this.init(t)}init(t){const e={};for(const i in this._init_data)if(i in t)for(const n in this._init_data[i])n in t[i]||(i in e||(e[i]={}),e[i][n]=this._init_data[i][n]);else e[i]=this._init_data[i];0!==Object.keys(e).length&&console.error("Unmatched data tree! Removed changes: ",e),this._init_data=t,this._data={};for(const t in this._init_data)for(const e in this._init_data[t]){const i=this._init_data[t][e];this._data[i.encoded_name]=i.value}}getEncodedName(t,e){if(e in this._init_data&&t in this._init_data[e])return this._init_data[e][t].encoded_name}getName(t){for(const e in this._init_data)for(const i in this._init_data[e])if(this._init_data[e][i].encoded_name===t)return[i,e]}get(t){if(!(t in this._data))throw new Error(`${t} is not available in Taipy Gui`);return this._data[t]}getInfo(t){for(const e in this._init_data)for(const i in this._init_data[e]){const n=this._init_data[e][i];if(n.encoded_name===t)return Object.assign(Object.assign({},n),{value:this._data[t]})}}getDataTree(){return this._init_data}getAllData(){return this._data}update(t,e){if(!(t in this._data))throw new Error(`${t} is not available in Taipy Gui`);this._data[t]=e}}const d=["ID","AID","GMC"],l=(t,e)=>{d.includes(t.type)&&""!==e.clientId&&""!==e.appId&&""!==e.context&&o(e.socket,"GDT","get_data_tree",{},e.clientId,e.context)};class h{constructor(t=void 0,e=void 0,i=void 0,n=void 0){n=n||(0,s.io)("/",{autoConnect:!1}),this.onInit=t,this.onChange=e,this.variableData=void 0,this.functionData=void 0,this.clientId="",this.context="",this.appId="",this.path=i,this.socket=n,((t,e)=>{t.on("connect",(()=>{""!==e.clientId&&""!==e.appId||e.init()})),t.io.on("reconnect",(()=>{console.log("WebSocket reconnected"),o(t,"AID","reconnect",e.appId,e.clientId,e.context)})),t.on("connect_error",(e=>{console.log("Error connecting WebSocket: ",e),setTimeout((()=>{t&&t.connect()}),500)})),t.on("disconnect",((e,i)=>{console.log("WebSocket disconnected due to: ",e,i),"io server disconnect"===e&&t&&t.connect()})),t.on("message",(t=>{((t,e)=>{var i;if(t.type){if("MU"===t.type&&Array.isArray(t.payload))for(const n of t.payload){const t=n.name,{value:a}=n.payload;null===(i=e.variableData)||void 0===i||i.update(t,a),e.onChange&&e.onChange(e,t,a)}else if("ID"===t.type){const{id:i}=t;(t=>{localStorage&&localStorage.setItem(a,t)})(i),e.clientId=i,e.updateContext(e.path)}else if("GMC"===t.type){const i=t.payload.data;window.localStorage.setItem("ModuleContext",i),e.context=i}else if("GDT"===t.type){const i=t.payload,n=i.variable,a=i.function;e.variableData&&e.functionData?(e.variableData.init(n),e.functionData.init(a)):(e.variableData=new c(n),e.functionData=new c(a),e.onInit&&e.onInit(e))}else if("AID"===t.type){const i=t.payload;if("reconnect"===i.name)return e.init();e.appId=i.id}else if("AL"===t.type&&e.onNotify){const i=t;e.onNotify(e,i.atype,i.message)}l(t,e)}})(t,e)})),t.connected||t.connect()})(n,this)}get onInit(){return this._onInit}set onInit(t){if(void 0!==t&&1!==(null==t?void 0:t.length))throw new Error("onInit() requires one parameter");this._onInit=t}get onChange(){return this._onChange}set onChange(t){if(void 0!==t&&3!==(null==t?void 0:t.length))throw new Error("onChange() requires three parameters");this._onChange=t}get onNotify(){return this._onNotify}set onNotify(t){if(void 0!==t&&3!==(null==t?void 0:t.length))throw new Error("onNotify() requires three parameters");this._onNotify=t}init(){this.clientId="",this.context="",this.appId="";const t=((t,e,i)=>{const n=localStorage&&localStorage.getItem(t);return n||""})(a);o(this.socket,"ID",a,t,t,void 0,!1),o(this.socket,"AID","connect","",t,void 0,!1),""!==t&&(this.clientId=t,this.updateContext(this.path))}getEncodedName(t,e){var i;return null===(i=this.variableData)||void 0===i?void 0:i.getEncodedName(t,e)}getName(t){var e;return null===(e=this.variableData)||void 0===e?void 0:e.getName(t)}get(t){var e;return null===(e=this.variableData)||void 0===e?void 0:e.get(t)}getInfo(t){var e;return null===(e=this.variableData)||void 0===e?void 0:e.getInfo(t)}getDataTree(){var t;return null===(t=this.variableData)||void 0===t?void 0:t.getDataTree()}getAllData(){var t;return null===(t=this.variableData)||void 0===t?void 0:t.getAllData()}getFunctionList(){var t;const e=null===(t=this.functionData)||void 0===t?void 0:t.getDataTree()[this.context];return Object.keys(e||{})}update(t,e){o(this.socket,"U",t,{value:e},this.clientId,this.context)}getContext(){return this.context}updateContext(t=""){t&&""!==t||(t=window.location.pathname.slice(1)),o(this.socket,"GMC","get_module_context",{path:t},this.clientId)}trigger(t,e,i={}){i.action=t,o(this.socket,"A",e,i,this.clientId,this.context)}upload(t,e,i){return((t,e,i,n,a="/taipy-uploads")=>new Promise(((o,s)=>{r.onmessage=t=>{t.data.error?s(t.data.message):t.data.done?o(t.data.message):i(t.data.progress)},r.onerror=t=>s(t),r.postMessage({files:e,uploadUrl:a,varName:t,id:n})})))(t,e,i,this.clientId)}getPageMetadata(){return JSON.parse(localStorage.getItem("tp_cp_meta")||"{}")}}const u=(t,e,i,n)=>new h(t,e,i,n),p=h;window.addEventListener("beforeunload",(()=>{document.cookie="tprh=;path=/;Max-Age=-99999999;",localStorage.removeItem("tp_cp_meta")}))}},i={};function n(t){var a=i[t];if(void 0!==a)return a.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,i,a,o)=>{if(!i){var r=1/0;for(l=0;l<t.length;l++){for(var[i,a,o]=t[l],s=!0,c=0;c<i.length;c++)(!1&o||r>=o)&&Object.keys(n.O).every((t=>n.O[t](i[c])))?i.splice(c--,1):(s=!1,o<r&&(r=o));if(s){t.splice(l--,1);var d=a();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[i,a,o]},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.u=t=>t+".taipy-gui-base.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=i[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{n.b=document.baseURI||self.location.href;var t={818:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var a,o,[r,s,c]=i,d=0;if(r.some((e=>0!==t[e]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var l=c(n)}for(e&&e(i);d<r.length;d++)o=r[d],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(l)},i=this.webpackChunkTaipyGuiBase=this.webpackChunkTaipyGuiBase||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var a=n.O(void 0,[804],(()=>n(464)));return n.O(a)})()));